var app=angular.module("ilvesExam",[]);app.controller("ToDoListCtrl",["$scope",function(a){a.roomReservations=[],a.reservedTimes=[],a.savedReservations=localStorage.getItem("roomReservations"),a.savedTimes=localStorage.getItem("reservedTimes"),null!==a.savedReservations&&null!==a.savedTimes&&(a.roomReservations=JSON.parse(a.savedReservations),a.reservedTimes=JSON.parse(a.savedTimes)),a.makeReservation=function(b,c,d,e){var f=c.getTime(),g=d.getTime();if(0==a.reservedTimes.length)a.reservedTimes.push([f,g]);else{for(var h=0;h<a.reservedTimes.length;h++)if(f>a.reservedTimes[h][0]&&f<a.reservedTimes[h][1]&&"alpha"==b||a.reservedTimes[h][0]>f&&a.reservedTimes[h][0]<g&&"alpha"==b||f+g==a.reservedTimes[h][0]+a.reservedTimes[h][1]&&"alpha"==b||f>a.reservedTimes[h][0]&&f<a.reservedTimes[h][1]&&"beta"==b||a.reservedTimes[h][0]>f&&a.reservedTimes[h][0]<g&&"beta"==b||f+g==a.reservedTimes[h][0]+a.reservedTimes[h][1]&&"beta"==b||f>a.reservedTimes[h][0]&&f<a.reservedTimes[h][1]&&"gamma"==b||a.reservedTimes[h][0]>f&&a.reservedTimes[h][0]<g&&"gamma"==b||f+g==a.reservedTimes[h][0]+a.reservedTimes[h][1]&&"gamma"==b)return alert("That time is overlapping!"),a.makeReservation;a.reservedTimes.push([f,g])}a.roomReservations.push({room:b,startTime:c,endTime:d,reservationBy:e}),localStorage.setItem("roomReservations",JSON.stringify(a.roomReservations)),localStorage.setItem("reservedTimes",JSON.stringify(a.reservedTimes))},a.deleteReservation=function(b){a.roomReservations.splice(a.roomReservations.indexOf(b),1),a.reservedTimes.splice(a.roomReservations.indexOf(b),1),localStorage.setItem("roomReservations",JSON.stringify(a.roomReservations)),localStorage.setItem("reservedTimes",JSON.stringify(a.reservedTimes))}}]);