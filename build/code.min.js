var app=angular.module("ilvesExam",[]);app.controller("addReservationsCtrl",["$scope",function(a){localStorage.clear(),a.reservedTimes=[],a.overlap=!1,a.savedTimes=localStorage.getItem("reservedTimes"),null!==a.savedTimes&&(a.reservedTimes=JSON.parse(a.savedTimes));var b=[],c=[],d=[];a.reservedTimes.push(b,c,d);var e=function(b,c,d){for(var e,f,g=0;g<d.length;g++)console.log(a.reservedTimes),e=d[g].times[0],f=d[g].times[1],(b>=e&&b<=f||e>=b&&e<=c||c>=e&&c<=f||b<=e&&c>=f)&&(alert("Overlap!"),a.overlap=!0)};a.makeReservation=function(b,c,d,f){a.overlap=!1;var g=c.getTime(),h=d.getTime(),i=a.reservedTimes[b];if(e(g,h,i),a.overlap)return a.makeReservation;0==b?(i.push({room:b,times:[g,h],reservationBy:f}),console.log(i)):1==b?(i.push({room:b,times:[g,h],reservationBy:f}),console.log(i)):2==b?(i.push({room:b,times:[g,h],reservationBy:f}),console.log(i)):console.log("No value.")},a.deleteReservation=function(b){for(var c=0;c<a.reservedTimes.length;c++)a.reservedTimes[c].splice(a.reservedTimes[c].indexOf(b),1);localStorage.setItem("reservedTimes",JSON.stringify(a.reservedTimes))}}]);