var app=angular.module("ilvesExam",[]);app.controller("addReservationsCtrl",["$scope",function(a){a.reservedTimes=[],a.overlap=!1,a.savedTimes=localStorage.getItem("reservedTimes"),null!==a.savedTimes&&(a.reservedTimes=JSON.parse(a.savedTimes)),a.makeReservation=function(b,c,d,e){a.overlap=!1;var f=c.getTime(),g=d.getTime();if(0==a.reservedTimes.length)a.reservedTimes.push({room:b,times:[f,g],reservationBy:e});else{for(var h in a.reservedTimes)switch(b){case"alpha":if(f>=a.reservedTimes[h].times[0]&&f<=a.reservedTimes[h].times[1]&&b==a.reservedTimes[h].room||a.reservedTimes[h][0]>=f&&a.reservedTimes[h][0]<=g&&b==a.reservedTimes[h].room||g>=a.reservedTimes[h].times[0]&&g<=a.reservedTimes[h].times[1]&&b==a.reservedTimes[h].room){alert("That time is overlapping in "+b+"!"),a.overlap=!0;break}case"beta":if(f>=a.reservedTimes[h].times[0]&&f<=a.reservedTimes[h].times[1]&&b==a.reservedTimes[h].room||a.reservedTimes[h][0]>=f&&a.reservedTimes[h][0]<=g&&b==a.reservedTimes[h].room||g>=a.reservedTimes[h].times[0]&&g<=a.reservedTimes[h].times[1]&&b==a.reservedTimes[h].room){alert("That time is overlapping in "+b+"!"),a.overlap=!0;break}case"gamma":if(f>=a.reservedTimes[h].times[0]&&f<=a.reservedTimes[h].times[1]&&b==a.reservedTimes[h].room||a.reservedTimes[h][0]>=f&&a.reservedTimes[h][0]<=g&&b==a.reservedTimes[h].room||g>=a.reservedTimes[h].times[0]&&g<=a.reservedTimes[h].times[1]&&b==a.reservedTimes[h].room){alert("That time is overlapping in "+b+"!"),a.overlap=!0;break}default:console.log("do nothing")}if(a.overlap)return a.makeReservation;a.reservedTimes.push({room:b,times:[f,g],reservationBy:e}),localStorage.setItem("reservedTimes",JSON.stringify(a.reservedTimes))}},a.deleteReservation=function(b){a.reservedTimes.splice(a.reservedTimes.indexOf(b),1),localStorage.setItem("reservedTimes",JSON.stringify(a.reservedTimes))}}]);